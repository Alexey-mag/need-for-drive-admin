(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["car"],{"07ac":function(t,r,e){var a=e("23e7"),o=e("6f53").values;a({target:"Object",stat:!0},{values:function(t){return o(t)}})},2532:function(t,r,e){"use strict";var a=e("23e7"),o=e("5a34"),i=e("1d80"),n=e("ab13");a({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(i(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"287a":function(t,r,e){},"44e7":function(t,r,e){var a=e("861d"),o=e("c6b6"),i=e("b622"),n=i("match");t.exports=function(t){var r;return a(t)&&(void 0!==(r=t[n])?!!r:"RegExp"==o(t))}},"57f0":function(t,r,e){"use strict";e("287a")},5899:function(t,r){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,r,e){var a=e("1d80"),o=e("5899"),i="["+o+"]",n=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),s=function(t){return function(r){var e=String(a(r));return 1&t&&(e=e.replace(n,"")),2&t&&(e=e.replace(c,"")),e}};t.exports={start:s(1),end:s(2),trim:s(3)}},"5a34":function(t,r,e){var a=e("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6f53":function(t,r,e){var a=e("83ab"),o=e("df75"),i=e("fc6a"),n=e("d1e7").f,c=function(t){return function(r){var e,c=i(r),s=o(c),l=s.length,u=0,p=[];while(l>u)e=s[u++],a&&!n.call(c,e)||p.push(t?[e,c[e]]:c[e]);return p}};t.exports={entries:c(!0),values:c(!1)}},7156:function(t,r,e){var a=e("861d"),o=e("d2bb");t.exports=function(t,r,e){var i,n;return o&&"function"==typeof(i=r.constructor)&&i!==e&&a(n=i.prototype)&&n!==e.prototype&&o(t,n),t}},"960f":function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"car__container"},[e("h1",{staticClass:"car__title"},[t._v("Карточка Автомобиля")]),e("el-form",{ref:"formCar",staticClass:"car__card_form",attrs:{"label-position":"top",model:t.formCar,rules:t.rules}},[e("el-card",{staticClass:"car__small_card"},[t.formCar.id?e("img",{staticClass:"car__img",attrs:{src:t.imgPath()}}):e("img",{staticClass:"car__img",attrs:{src:t.formCar.thumbnail.path}}),e("p",{staticClass:"card__car_model"},[t._v(t._s(t.formCar.name))]),e("p",{staticClass:"card__car_category"},[t._v(t._s(t.formCar.categoryId))]),e("el-form-item",{attrs:{prop:"thumbnail"}},[e("input",{attrs:{type:"file",size:"medium",accept:"image/png, image/jpeg, image/jpg"},on:{change:t.setImage}})]),e("div",{staticClass:"car__progress"},[e("p",{staticClass:"car__progress_title"},[t._v("Заполнено")]),e("el-progress",{attrs:{percentage:t.percentageLoader}})],1),e("div",{staticClass:"car__description"},[e("el-form-item",{attrs:{label:"Описание",prop:"description"}},[e("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.formCar.description,callback:function(r){t.$set(t.formCar,"description",r)},expression:"formCar.description"}})],1)],1)],1),e("el-card",{staticClass:"car__large_card",attrs:{"body-style":{height:"100%"}}},[e("div",{staticClass:"large__card_title"},[t._v("Настройки автомобиля")]),e("div",{staticClass:"large__card_block1"},[e("div",{staticClass:"card__input_block"},[e("el-form-item",{attrs:{label:"Модель автомобиля",prop:"name"}},[e("input-app",{attrs:{item:t.formCar.name,"input-class":"car__input"},on:{update:t.setFormCarModel}})],1)],1),e("div",{staticClass:"card__input_block"},[e("el-form-item",{attrs:{label:"Тип автомобиля",prop:"categoryId"}},[t.getCarCategory?e("select-app",{attrs:{"select-class":"car__input",items:t.getCarCategory,item:t.formCar.categoryId,"option-label":"name","option-value":"name",multiple:!1,"select-label":""},on:{update:t.setCategory}}):t._e()],1)],1)]),e("div",{staticClass:"large__card_block2"},[e("div",{staticClass:"card__input_block"},[e("div",{staticClass:"car__input_and_button"},[e("el-form-item",{attrs:{label:"Доступные цвета"}},[e("input-app",{attrs:{item:t.color,"input-class":"car__input"},on:{update:t.carColor}})],1),e("el-button",{staticClass:"car__card_input_button",attrs:{type:"default"},on:{click:t.addColor}},[e("i",{staticClass:"el-icon-plus card__plus_icon"})])],1)]),e("el-form-item",{attrs:{prop:"colors"}},[e("checkbox-group-app",{attrs:{items:t.formCar.colors,"class-prop":"car__card__checkbox"},on:{update:t.setSelectedColors}})],1),e("div",{staticClass:"car__input__price_block"},[e("el-form-item",{attrs:{label:"Цена от",prop:"priceMin"}},[e("input-app",{attrs:{item:t.formCar.priceMin,"input-class":"car__input_price",type:"number"},on:{update:t.setPriceMin}})],1),e("el-form-item",{attrs:{label:"Цена до",prop:"priceMax"}},[e("input-app",{attrs:{item:t.formCar.priceMax,"input-class":"car__input_price",type:"number"},on:{update:t.setPriceMax}})],1)],1),e("el-form-item",{attrs:{label:"Номер",prop:"number"}},[e("input-app",{attrs:{item:t.formCar.number,"input-class":"car__input_price"},on:{update:t.setFormCarNumber}})],1),e("el-form-item",{attrs:{label:"Бензин",prop:"tank"}},[e("input-app",{attrs:{item:t.formCar.tank,"input-class":"car__input_price",type:"number"},on:{update:t.setFormCarTank}})],1)],1),e("div",{staticClass:"large__card_footer"},[e("div",{staticClass:"card_footer_confirm"},[e("button-app",{attrs:{"button-type":"primary","button-class":"card_footer_confirm_button",name:"Сохранить"},on:{click:function(r){return t.submitForm("formCar")}}}),e("button-app",{attrs:{"button-type":"info",name:"Отменить"},on:{click:function(r){return t.clearForm("formCar")}}})],1),e("div",{staticClass:"card_footer_cancel"},[e("button-app",{attrs:{"button-type":"danger",name:"Удалить"},on:{click:t.deleteSelectedCar}})],1)])])],1)],1)},o=[];e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var n=e("5530"),c=(e("07ac"),e("159b"),e("b0c0"),e("caad"),e("2532"),e("a9e3"),e("99af"),e("6646")),s=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("el-checkbox-group",{class:t.classProp,on:{change:t.updateValue},model:{value:t.model,callback:function(r){t.model=r},expression:"model"}},t._l(t.items,(function(t){return e("el-checkbox",{key:t.index,attrs:{label:t,checked:""}})})),1)},l=[],u={name:"CheckboxGroupApp",data:function(){return{model:[]}},props:{items:Array,classProp:String},methods:{updateValue:function(t){this.$emit("update",t)}}},p=u,f=e("2877"),m=Object(f["a"])(p,s,l,!1,null,null,null),d=m.exports,C=e("2f62"),g=e("e18c"),h=e("2cac"),b={name:"CarCard",components:{ButtonApp:h["a"],SelectApp:g["a"],CheckboxGroupApp:d,InputApp:c["a"]},data:function(){var t=function(t,r,e){r<0||r>100?e(new Error("Кол-во бензина должно быть от 0 до 100")):e()},r=function(t,r,e){if(!r)return e(new Error("Пожалуйста, введите цену автомобиля"));r<0?e(new Error("Цена должна быть положительным числом больше 0")):e()},e=function(t,r,e){if(void 0===r.path)return e(new Error("Пожалуйста, загрузите изображение автомобиля"));e()};return{formCar:{id:"",number:"",tank:0,description:"",name:"",thumbnail:{},categoryId:"",priceMin:0,priceMax:0,colors:[],selectedColors:[]},rules:{name:[{required:!0,message:"Пожалуйста, введите модель автомобиля",trigger:"blur"}],description:[{required:!0,message:"Пожалуйста, введите описание автомобиля",trigger:"blur"}],priceMin:[{validator:r,trigger:"blur"}],priceMax:[{validator:r,trigger:"blur"}],thumbnail:[{validator:e,trigger:"blur"}],tank:[{validator:t,trigger:"blur"}],categoryId:[{required:!0,message:"Пожалуйста, выберите категорию автомобиля",trigger:"blur"}],number:[{max:6,message:"Длина номера не должна превышать 6 символов",trigger:"blur"}]},color:""}},computed:Object(n["a"])(Object(n["a"])({},Object(C["c"])("car",["getCarCategory","getCar","isNewCar"])),{},{percentageLoader:function(){var t,r=0,e=0;t=this.formCar.id?10:9;var a=Object.values(this.formCar);a.forEach((function(t){"string"===typeof t&&(r+=""===t?0:1),"number"===typeof t&&(r+=t<=0?0:1),"object"===i(t)&&(t.length&&0!==t.length&&(e=1),t.path?r+=1:r+=0)})),r+=e;var o=r/t*100;return Math.ceil(o)}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(C["b"])("car",["fetchCarCategory","postCar","deleteCar"])),Object(C["d"])("car",["setNewCar"])),{},{setFormCarModel:function(t){this.formCar.name=t},setSelectedColors:function(t){this.formCar.selectedColors=t},setImage:function(t){var r=this,e=t.target.files[0],a=new FileReader;a.readAsDataURL(e),a.onload=function(t){r.formCar.thumbnail={size:e.size,originalname:e.name,mimetype:e.type,path:t.target.result}}},carColor:function(t){this.color=t},addColor:function(){if(this.color){if(this.formCar.colors.includes(this.color))return this.formCar.colors;this.formCar.colors.push(this.color)}this.color=""},setCategory:function(t){this.formCar.categoryId=t},submitForm:function(t){var r=this;this.$refs[t].validate((function(t){t?(0===r.formCar.selectedColors.length||(r.formCar.colors=r.formCar.selectedColors),delete r.formCar.selectedColors,r.postCar(r.formCar),r.$message.success("Успех! Машина сохранена.")):r.$notify.error({title:"Ошибка заполнения формы",message:"Пожалуйста, заполните все поля корректно"})}))},clearForm:function(t){this.$refs[t].resetFields()},deleteSelectedCar:function(){var t=this;this.$confirm("Вы точно хотите удалить выбранную машину?","Внимание",{confirmButtonText:"OK",cancelButtonText:"Отмена",type:"warning"}).then((function(){t.deleteCar(t.formCar),t.$message({type:"success",message:"Машина удалена"})})).catch((function(){t.$message({type:"info",message:"Удаление отменено"})}))},setPriceMin:function(t){this.formCar.priceMin=Number(t)},setPriceMax:function(t){this.formCar.priceMax=Number(t)},setFormCarNumber:function(t){this.formCar.number=t},setFormCarTank:function(t){this.formCar.tank=Number(t)},imgPath:function(){return"".concat("https://api-factory.simbirsoft1.com").concat(this.formCar.thumbnail.path)}}),updated:function(){this.isNewCar&&(this.formCar.name=this.getCar.name,this.formCar.description=this.getCar.description,this.formCar.id=this.getCar.id,this.formCar.number=this.getCar.number,this.formCar.name=this.getCar.name,this.formCar.priceMin=this.getCar.priceMin,this.formCar.priceMax=this.getCar.priceMax,this.formCar.priceMax=this.getCar.priceMax,this.formCar.thumbnail=this.getCar.thumbnail,this.formCar.categoryId=this.getCar.categoryId.name,this.formCar.colors=this.getCar.colors,this.formCar.tank=this.getCar.tank,this.setNewCar(!1))},mounted:function(){this.fetchCarCategory()}},_=b,v=(e("57f0"),Object(f["a"])(_,a,o,!1,null,null,null));r["default"]=v.exports},"99af":function(t,r,e){"use strict";var a=e("23e7"),o=e("d039"),i=e("e8b5"),n=e("861d"),c=e("7b0b"),s=e("50c4"),l=e("8418"),u=e("65f0"),p=e("1dde"),f=e("b622"),m=e("2d00"),d=f("isConcatSpreadable"),C=9007199254740991,g="Maximum allowed index exceeded",h=m>=51||!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),b=p("concat"),_=function(t){if(!n(t))return!1;var r=t[d];return void 0!==r?!!r:i(t)},v=!h||!b;a({target:"Array",proto:!0,forced:v},{concat:function(t){var r,e,a,o,i,n=c(this),p=u(n,0),f=0;for(r=-1,a=arguments.length;r<a;r++)if(i=-1===r?n:arguments[r],_(i)){if(o=s(i.length),f+o>C)throw TypeError(g);for(e=0;e<o;e++,f++)e in i&&l(p,f,i[e])}else{if(f>=C)throw TypeError(g);l(p,f++,i)}return p.length=f,p}})},a9e3:function(t,r,e){"use strict";var a=e("83ab"),o=e("da84"),i=e("94ca"),n=e("6eeb"),c=e("5135"),s=e("c6b6"),l=e("7156"),u=e("c04e"),p=e("d039"),f=e("7c73"),m=e("241c").f,d=e("06cf").f,C=e("9bf2").f,g=e("58a8").trim,h="Number",b=o[h],_=b.prototype,v=s(f(_))==h,y=function(t){var r,e,a,o,i,n,c,s,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),r=l.charCodeAt(0),43===r||45===r){if(e=l.charCodeAt(2),88===e||120===e)return NaN}else if(48===r){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(i=l.slice(2),n=i.length,c=0;c<n;c++)if(s=i.charCodeAt(c),s<48||s>o)return NaN;return parseInt(i,a)}return+l};if(i(h,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,k=function(t){var r=arguments.length<1?0:t,e=this;return e instanceof k&&(v?p((function(){_.valueOf.call(e)})):s(e)!=h)?l(new b(y(r)),e,k):y(r)},I=a?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),M=0;I.length>M;M++)c(b,x=I[M])&&!c(k,x)&&C(k,x,d(b,x));k.prototype=_,_.constructor=k,n(o,h,k)}},ab13:function(t,r,e){var a=e("b622"),o=a("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[o]=!1,"/./"[t](r)}catch(a){}}return!1}},caad:function(t,r,e){"use strict";var a=e("23e7"),o=e("4d64").includes,i=e("44d2");a({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d28b:function(t,r,e){var a=e("746f");a("iterator")},e18c:function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("el-select",{class:t.selectClass,attrs:{multiple:t.multiple,"collapse-tags":"",placeholder:t.selectLabel},on:{change:t.updateValue},model:{value:t.valueOption,callback:function(r){t.valueOption=r},expression:"valueOption"}},t._l(t.items,(function(r){return e("el-option",{key:r.index,attrs:{label:r[t.optionLabel],value:r[t.optionValue]}})})),1)},o=[],i={name:"SelectApp",props:{selectLabel:String,items:Array,item:String,optionLabel:String,optionValue:String,selectClass:String,multiple:Boolean},computed:{valueOption:{get:function(){return this.item},set:function(t){this.updateValue(t)}}},methods:{updateValue:function(t){this.$emit("update",t)}}},n=i,c=e("2877"),s=Object(c["a"])(n,a,o,!1,null,null,null);r["a"]=s.exports}}]);
//# sourceMappingURL=car.93e2877b.js.map